{"ast":null,"code":"var _jsxFileName = \"/Users/kayydv/Library/CloudStorage/OneDrive-FloridaInstituteofTechnology/Summer 2022/Intro to Software Engineering/Term-project/summer-project/src/global/authorization/UserContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useState, useContext, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const initializeUser = {\n  user: {\n    authenticated: false,\n    id: undefined\n  },\n  setUser: user => {},\n  userLogin: (email, password) => {},\n  userRegistration: (firstName, lastName, dob, email, password) => {},\n  userLogout: () => {},\n  deleteUser: userId => {},\n  editUser: (userId, firstName, lastName, dob, email, password) => {},\n  getUser: userId => {},\n  addProperty: (userId, street, city, state, zipcode, description, estimate, photos, videos) => {},\n  deleteProperty: propertyId => {},\n  editProperty: (propertyId, street, city, state, zipcode, description, estimate, photos, videos) => {}\n};\nexport const UserContext = /*#__PURE__*/createContext(initializeUser);\nexport const UserProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  const stored = sessionStorage.getItem('GilderiseUser');\n  const [user, setUser] = useState(stored == null ? {\n    authenticated: false,\n    id: undefined\n  } : JSON.parse(stored)); // @todo update to use JWT Token\n  // Store user data on local memory on every update of user or user.authenticated.\n\n  useEffect(() => {\n    sessionStorage.setItem('GilderiseUser', JSON.stringify(user));\n  }, [user, user.authenticated]);\n\n  const userLogin = (email, password) => {\n    console.log(\"Handling User Login\");\n    let success = false;\n    const params = {\n      'email': email,\n      'password': password\n    };\n    let requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(params)\n    };\n\n    const login = async () => {\n      await fetch(\"/login_user\", requestOptions).then(response => {\n        response.json().then(data => {\n          console.log(data);\n\n          if (data !== false) {\n            success = true;\n            setUser({\n              'authenticated': true,\n              'id': data.user_id\n            });\n          }\n        });\n      }).catch(e => {\n        console.log(e);\n      });\n    };\n\n    login();\n\n    if (success) {\n      navigate(\"/dashboard\");\n    } else {// warn user of unsuccessful registration attempt\n    }\n  };\n\n  const userRegistration = (firstName, lastName, dob, email, password) => {\n    console.log(\"Handling User Registration\");\n    let success = false;\n    const params = {\n      'first_name': firstName,\n      'last_name': lastName,\n      'email': email,\n      'password': password\n    };\n    let requestOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(params)\n    };\n\n    const register = async () => {\n      await fetch(\"/add_user\", requestOptions).then(response => {\n        response.json().then(data => {\n          console.log(data);\n\n          if (data !== false) {\n            success = true;\n            setUser({\n              'authenticated': true,\n              'id': data.user_id\n            });\n          }\n        });\n      }).catch(e => {\n        console.log(e);\n      });\n    };\n\n    register();\n\n    if (success) {\n      navigate(\"/dashboard\");\n    } else {// warn user of unsuccessful registration attempt\n    }\n  };\n\n  const userLogout = () => {\n    // Remove user info.\n    setUser({\n      authenticated: false,\n      id: undefined,\n      role: Role.Unassigned\n    });\n    navigate(\"/\");\n  };\n\n  const test = () => {\n    const test = async () => await fetch(\"/hello\").then(response => {\n      response.json().then(data => {\n        console.log(data.string);\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n\n    test();\n  };\n\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      userLogin,\n      userRegistration,\n      userLogout,\n      test\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 3\n  }, this);\n};\n\n_s(UserProvider, \"pNeObRbK6fx4sxbjZw8gBplLBns=\", false, function () {\n  return [useNavigate];\n});\n\n_c = UserProvider;\nexport const useUser = () => {\n  _s2();\n\n  return useContext(UserContext);\n};\n\n_s2(useUser, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport default UserContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["createContext","useState","useContext","useEffect","useNavigate","initializeUser","user","authenticated","id","undefined","setUser","userLogin","email","password","userRegistration","firstName","lastName","dob","userLogout","deleteUser","userId","editUser","getUser","addProperty","street","city","state","zipcode","description","estimate","photos","videos","deleteProperty","propertyId","editProperty","UserContext","UserProvider","children","navigate","stored","sessionStorage","getItem","JSON","parse","setItem","stringify","console","log","success","params","requestOptions","method","headers","body","login","fetch","then","response","json","data","user_id","catch","e","register","role","Role","Unassigned","test","string","useUser"],"sources":["/Users/kayydv/Library/CloudStorage/OneDrive-FloridaInstituteofTechnology/Summer 2022/Intro to Software Engineering/Term-project/summer-project/src/global/authorization/UserContext.tsx"],"sourcesContent":["import { createContext, useState, useContext, useEffect } from \"react\" ;\nimport { User } from \"../TypeDefs\" ;\nimport { useNavigate } from \"react-router-dom\" ;\n\n\nexport const initializeUser:\n\t{\n\t\tuser: User, setUser: any, userLogin: any, userRegistration: any, userLogout: any,\n\t\tdeleteUser: any, editUser: any, getUser: any, addProperty: any, deleteProperty: any,\n\t\teditProperty:any,\n\t} =\n{\n\tuser: {\n\t\tauthenticated: false,\n\t\tid: undefined\n\t},\n\tsetUser: (user: User) => { },\n\tuserLogin: (email: string, password: string) => { },\n\tuserRegistration: (firstName: string, lastName: string, dob: string, email: string, password: string) => { },\n\tuserLogout: () => { },\n\tdeleteUser: (userId: number) => { },\n\teditUser: (userId: number, firstName: string, lastName: string, dob: string, email: string, password: string) => { },\n\tgetUser: (userId: number) => { },\n\taddProperty: (userId: number, street: string, city: string, state: string, zipcode: string, description: string, estimate: string, photos: any, videos: any) => { },\n\tdeleteProperty: (propertyId: number) => { },\n\teditProperty: (propertyId: number, street: string, city: string, state: string, zipcode: string, description: string, estimate: string, photos: any, videos: any) => { },\n\n\n\t\n}\n\nexport const UserContext = createContext<any>(initializeUser) ;\n\nexport const UserProvider = ({ children }) => {\n\n\tconst navigate = useNavigate() ;\n\tconst stored = sessionStorage.getItem('GilderiseUser') ;\n\tconst [user, setUser] = useState<User>( stored == null ?\n\t\t{\n\t\t\tauthenticated: false,\n\t\t\tid: undefined,\n\t\t} :\n\t\tJSON.parse(stored)) ;\n\n\t// @todo update to use JWT Token\n\t// Store user data on local memory on every update of user or user.authenticated.\n\tuseEffect(() => {\n\t\tsessionStorage.setItem('GilderiseUser', JSON.stringify(user)) ;\n\n\t}, [user, user.authenticated])\n\n\tconst userLogin = (email: string, password: string) => {\n\n\t\tconsole.log(\"Handling User Login\") ;\n\t\tlet success = false ;\n\n\t\tconst params = {\n\t\t\t'email': email,\n\t\t\t'password': password,\n\t\t}\n\n\t\tlet requestOptions = {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t},\n\t\t\tbody: JSON.stringify(params)\n\t\t}\n\t\n\t\tconst login = async () => {\n\t\t\tawait fetch(\"/login_user\", requestOptions).then(response => {\n\t\t\t\tresponse.json().then(data => {\n\t\t\t\t\tconsole.log(data)\n\t\t\t\t\tif (data !== false) {\n\t\t\t\t\t\tsuccess = true ;\n\t\t\t\t\t\tsetUser({\n\t\t\t\t\t\t\t'authenticated': true,\n\t\t\t\t\t\t\t'id': data.user_id,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}).catch(e => {\n\t\t\t\tconsole.log(e)\n\t\t\t})\n\t\t}\n\n\t\tlogin() ;\n\t\t\n\t\tif (success) {\n\t\t\tnavigate(\"/dashboard\") ;\n\t\t} else { \n\t\t\t// warn user of unsuccessful registration attempt\n\t\t}\n\t\t\n\t}\n\n\tconst userRegistration = (firstName: string, lastName: string, dob: string, email: string, password: string) => {\n\t\tconsole.log(\"Handling User Registration\");\n\t\t\n\t\tlet success = false ;\n\n\t\tconst params = {\n\t\t\t'first_name': firstName,\n\t\t\t'last_name': lastName,\n\t\t\t'email': email,\n\t\t\t'password': password,\n\t\t}\n\n\t\tlet requestOptions = {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t},\n\t\t\tbody: JSON.stringify(params)\n\t\t}\n\t\n\t\tconst register = async () => {\n\t\t\tawait fetch(\"/add_user\", requestOptions).then(response => {\n\t\t\t\tresponse.json().then(data => {\n\t\t\t\t\tconsole.log(data) ;\n\t\t\t\t\tif (data !== false) {\n\t\t\t\t\t\tsuccess = true ;\n\t\t\t\t\t\tsetUser({\n\t\t\t\t\t\t\t'authenticated': true,\n\t\t\t\t\t\t\t'id': data.user_id,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}).catch(e => {\n\t\t\t\tconsole.log(e)\n\t\t\t})\n\t\t}\n\n\t\tregister();\n\t\tif (success) {\n\t\t\tnavigate(\"/dashboard\") ;\n\t\t} else { \n\t\t\t// warn user of unsuccessful registration attempt\n\t\t}\n\t\t\n\t}\n\n\tconst userLogout = () => {\n\t\t// Remove user info.\n\t\tsetUser({\n\t\t\tauthenticated: false,\n\t\t\tid: undefined,\n\t\t\trole: Role.Unassigned,\n\t\t}) ;\n\t\tnavigate(\"/\") ;\n\t}\n\t\n\tconst test = () => {\n\n\t\tconst test = async () => await fetch(\"/hello\").then(response => {\n\t\t\tresponse.json().then(data => {\n\t\t\t\tconsole.log(data.string)\n\t\t\t})\n\t\t}).catch(e => {\n\t\t\tconsole.log(e)\n\t\t})\n\n\t\ttest() ;\n\t}\n\n\t\n\n  \n\treturn (\n\t\t<UserContext.Provider value={{ user, userLogin, userRegistration, userLogout,test }}>\n\t\t\t{children}\n\t\t</UserContext.Provider>\n\t)\n}\n\nexport const useUser = () => useContext(UserContext) ;\n\nexport default UserContext ;"],"mappings":"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"},"metadata":{},"sourceType":"module"}